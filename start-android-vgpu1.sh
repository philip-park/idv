#!/bin/bash -x
# This file is auto generated by IDV setup.sh file.
/usr/bin/qemu-system-x86_64 \
-m 2048 -smp 2 -M q35 \
-name caas-vm \
-drive file=./OVMF.fd,format=raw,if=pflash \
-enable-kvm \
-vga none \
-display none \
-k en-us \
-global ICH9-LPC.disable_s3=0 -global ICH9-LPC.disable_s4=1 \
-global PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=1 \
-cpu host \
-gmp stdio \
-machine kernel_irqchip=off \
-pidfile android_vm.pid \
-device intel-hda \
-device hda-duplex \
-audiodev id=android_spk,timer-period=5000,server=/run/user/1000/pulse/native,driver=pa \
-device e1000,netdev=net0 -netdev user,id=net0,hostfwd=tcp::5555-:5555,hostfwd=tcp::5554-:5554 \
-device qemu-xhci,id=xhci,addr=0x8 -device usb-host,vendorid=0x03eb,productid=0x8a6e \
-device usb-host,vendorid=0x0eef,productid=0x7200 \
-device usb-host,vendorid=0x222a,productid=0x0141 \
-device usb-host,vendorid=0x222a,productid=0x0088 \
-device usb-host,vendorid=0x8087,productid=0x0a2b \
-device usb-mouse \
-device usb-kbd \
-chardev socket,id=charserial0,path=./kernel-console,server,nowait \
-device isa-serial,chardev=charserial0,id=serial0 \
-drive file=/home/snuc/idv/build/civ/android.qcow2,if=none,id=disk1 \
-device virtio-blk-pci,drive=disk1,bootindex=1 \
-device vhost-vsock-pci,id=vhost-vsock-pci0,guest-cid=3 \
-device intel-iommu,device-iotlb=off,caching-mode=on \
-full-screen -fsdev local,security_model=none,id=fsdev0,path=/var/vm/civ/share_folder \
-device virtio-9p-pci,fsdev=fsdev0,mount_tag=hostshare \
-smbios type=2,serial=BTKY8490051D -nodefaults \
-device vfio-pci-nohotplug,ramfb=off,sysfsdev=/sys/bus/pci/devices/0000:00:02.0/5d0f0bf8-29e7-11eb-b78a-83f8315c2159,display=off,x-igd-opregion=on
